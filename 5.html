<!doctype html>
<html lang="en-us">
	<head>
		  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	</head>
<body>
<!-- Display error message in following div -->
<div class="error-message"></div>

<form id="satisfaction" onsubmit="return validateInput()">
  <input type="radio" name="satisfied" value="yes" required /> Satisfied
  <input type="checkbox" name="donate" /> Donate<br />
  <input type="radio" name="satisfied" value="no" required /> Not satisfied
  <input type="text" name="reason" /> Reason<br />
  <input type="submit" value="Submit" />
</form>



	<script>

function validateInput() {
	debugger;
		var satisfied = document.forms["satisfaction"]["satisfied"].value;
		var donate = document.forms["satisfaction"]["donate"].value;
		var reason = document.forms["satisfaction"]["reason"].value;
		

  validate(rule1(),rule2())

	var rule1 = function () {
		var rule1 = false
		//if (donate = checked && satisfied != true) {
		//$("#form_id :input[name='"+input_name+"']"); 
		if( ($('name=donate').is(":checked")) && (satisfied == "no")) {rule1 = true;};
		return rule1
	}
	
	var rule2 = function() {
		var rule2 = false
		//if (!satisfied = true && reason != null || reason == "") {
		if (satisfied == "no" && reason == null) { rule2 = true;};
		return rule2
	}

	function validate(rule1,rule2) {
		console.log(rule1,rule2)
		
		var message = ""
		var display = false
		if (rule1 == true && rule2 == true) { message = "both rules failed"; display = true; }
		else if (rule1 == true && rule2 == false)  { message = "rule 1 failed"; display = true;}
		else if (rule1 == false && rule1 == true) { message = "rule 2 failed"; display = true;}

		if(display) { displayError("error", message)}
	}
  
  function displayError(sel,msg){
  	document.getElementByClass(sel).innerHTML = msg;
  }
 
};


// $('#form_id:input').each(function (el) {
//     items[el.name] = el;
// });
// }

// $('#myForm').submit(function() {
//     // get all the inputs into an array.
//     var $inputs = $('#myForm :input');

//     // not sure if you wanted this, but I thought I'd add it.
//     // get an associative array of just the values.
//     var values = {};
//     $inputs.each(function() {
//         values[this.name] = $(this).val();
//     });

	</script>
	</body>
	</html>
